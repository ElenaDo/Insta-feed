(function(e){function t(t){for(var r,s,c=t[0],i=t[1],u=t[2],d=0,v=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&v.push(a[s][0]),a[s]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);l&&l(t);while(v.length)v.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var i=n[c];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";n("85ec")},"0ab0":function(e,t,n){"use strict";n("c432")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"main-container"},[n("div",{staticClass:"select-panel"},[n("div",[n("span",[e._v("Account name")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.account=t.target.multiple?n:n[0]}}},e._l(e.options,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)]),n("div",[n("span",[e._v("Number of feeds")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.numberOfFeeds,expression:"numberOfFeeds"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.numberOfFeeds=t.target.multiple?n:n[0]}}},e._l(15,(function(t){return n("option",{key:t,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)])]),n("Instagram",{attrs:{account:e.account,numberOfFeeds:e.numberOfFeeds}})],1)])},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"filter"},[n("span",[e._v("Show")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selected=t.target.multiple?n:n[0]}}},e._l(e.options,(function(t){return n("option",{key:t.value,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)]),n("h4",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}]},[e._v("Loading..")]),n("h4",{directives:[{name:"show",rawName:"v-show",value:!e.limited.length&&!e.loading,expression:"!limited.length && !loading"}]},[e._v("No items to show..")]),n("div",{staticClass:"insta-feed"},e._l(e.limited,(function(e){return n("Card",{key:e.id,attrs:{post:e}})})),1)])},c=[],i=(n("4de4"),n("fb6a"),n("a9e3"),n("2909")),u=n("5530"),l=n("2f62"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"outer"},[e.post.is_video?n("div",{staticClass:"card video"},[n("video",{attrs:{controls:""}},[e.visible?n("source",{attrs:{src:e.post.video_url,width:e.post.dimensions.width,height:e.post.dimensions.height}}):e._e()]),n("div",{staticClass:"likes"},[e._v(e._s(e.post.video_view_count)+" View(s)")])]):n("div",{staticClass:"card insta_img",style:[e.visible&&{backgroundImage:"url("+e.post.display_url+")"}]},[n("span",{staticClass:"likes"},[e._v(e._s(e.post.edge_liked_by.count)+" Like(s)")])])])},v=[],p=n("3835"),f={props:{post:Object},name:"Card",data:function(){return{visible:!1,observer:null,intersected:!1}},mounted:function(){var e=this;this.observer=new IntersectionObserver((function(t){var n=Object(p["a"])(t,1),r=n[0];r.isIntersecting&&(e.visible=!0,e.observer.disconnect())})),this.observer.observe(this.$el)},destroyed:function(){this.observer.disconnect()}},m=f,h=(n("0ab0"),n("2877")),b=Object(h["a"])(m,d,v,!1,null,null,null),g=b.exports,_={name:"Instagam",props:{numberOfFeeds:Number,account:String},components:{Card:g},data:function(){return{selected:"all",options:[{text:"all",value:"all"},{text:"photo",value:"photo"},{text:"video",value:"video"}]}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(l["b"])(["sortedRecentFeeds"])),Object(l["c"])(["loading"])),{},{filtered:function(){var e=this.selected;return"all"===e?this.sortedRecentFeeds:Object(i["a"])(this.sortedRecentFeeds).filter((function(t){return"video"===e?t.is_video:!t.is_video}))},limited:function(){return this.filtered.slice(0,this.numberOfFeeds)}}),watch:{account:function(e){this.$store.dispatch("fetchFeed",{account:e})}}},w=_,O=(n("ce69"),Object(h["a"])(w,s,c,!1,null,null,null)),y=O.exports,x={name:"App",components:{Instagram:y},data:function(){return{numberOfFeeds:15,account:"",options:[{text:"Please select..",value:""},{text:"artnightevents",value:"artnightevents"},{text:"shakenightevents",value:"shakenightevents"},{text:"plantnightevents",value:"plantnightevents"}]}}},j=x,F=(n("034f"),Object(h["a"])(j,a,o,!1,null,null,null)),k=F.exports,A=(n("99af"),n("d81d"),n("d3b7"),n("96cf"),n("1da1")),S=n("ade3");r["a"].use(l["a"]);var C=localStorage.getItem("store.recentFeeds"),P=C?JSON.parse(C):{},N=new l["a"].Store({state:{loading:!1,selectedAccount:"",recentFeeds:P},getters:{sortedRecentFeeds:function(e){var t=e.recentFeeds[e.selectedAccount];return t?t.data.sort((function(e,t){return t.taken_at_timestamp-e.taken_at_timestamp})):[]}},mutations:{setSelectedAccount:function(e,t){var n=t.account;e.selectedAccount=n},setAccountFeed:function(e,t){var n=t.data,r=new Date;e.recentFeeds=Object(u["a"])(Object(u["a"])({},e.recentFeeds),{},Object(S["a"])({},e.selectedAccount,{lastFetched:r,data:n}))},loading:function(e){e.loading=!0},noLoading:function(e){e.loading=!1}},actions:{request:function(e,t){return Object(A["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=t.account,r("loading"),n.prev=3,n.next=6,fetch("https://www.instagram.com/".concat(a,"/?__a=1"));case 6:return s=n.sent,n.next=9,s.json();case 9:o=n.sent,n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](3),alert(n.t0);case 15:return r("noLoading"),n.abrupt("return",o);case 17:case"end":return n.stop()}}),n,null,[[3,12]])})))()},fetchFeed:function(e,t){return Object(A["a"])(regeneratorRuntime.mark((function n(){var r,a,o,s,c,u,l,d,v,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,a=e.dispatch,o=e.state,s=t.account,r("setSelectedAccount",{account:s}),c=!1,o.recentFeeds[s]&&(u=o.recentFeeds[s].lastFetched,"string"===typeof u&&(u=new Date(u)),l=(new Date-u)/1e3/60,d=60,l<d&&(c=!0)),s&&!c){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,a("request",{account:s});case 9:if(v=n.sent,v){n.next=12;break}return n.abrupt("return");case 12:p=[].concat(Object(i["a"])(v.graphql.user.edge_owner_to_timeline_media.edges),Object(i["a"])(v.graphql.user.edge_felix_video_timeline.edges)).map((function(e){return e.node})),r("setAccountFeed",{data:p});case 14:case"end":return n.stop()}}),n)})))()}},modules:{}});N.subscribe((function(e,t){"setAccountFeed"===e.type&&localStorage.setItem("store.recentFeeds",JSON.stringify(t.recentFeeds))}));var I=N;r["a"].config.productionTip=!1,new r["a"]({store:I,render:function(e){return e(k)}}).$mount("#app")},5755:function(e,t,n){},"85ec":function(e,t,n){},c432:function(e,t,n){},ce69:function(e,t,n){"use strict";n("5755")}});
//# sourceMappingURL=app.df72812b.js.map